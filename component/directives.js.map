{"version":3,"sources":["directives.es6"],"names":[],"mappings":";;;;;;;;;;;IAIM;AACF,wBAAa,SAAb,EAAwB;;;AACpB,aAAK,SAAL,KAAmB,KAAK,SAAL,GAAnB,CADoB;KAAxB;;;;;;;;;qCAOc;AACV,gBAAI,SAAJ,CAAc,YAAd,EAA4B;AACxB,wBAAQ,CAAC,SAAD,EAAY,SAAZ,EAAuB,WAAvB,CAAR;;AAEA,sCAAQ;AACJ,wBAAI,MAAM;AACN,8BAAM,IAAN;AACA,2CAAmB,IAAnB;AACA,oCAAY,KAAZ;AACA,gCAAQ,OAAR;AACA,oCAAY,OAAZ;qBALA,CADA;;AASJ,yBAAK,IAAI,CAAJ,IAAS,KAAK,MAAL,EAAa;AACvB,4BAAI,KAAK,MAAL,CAAY,CAAZ,CAAJ,EAAoB,IAAI,CAAJ,IAAS,KAAK,MAAL,CAAY,CAAZ,CAAT,CAApB;qBADJ;;AAIA,sBAAE,KAAK,EAAL,CAAF,CAAW,cAAX,CAA0B,GAA1B,EAbI;iBAHgB;;AAkBxB,+BAAe;AACX,gDAAW;AACP,6BAAK,MAAL,GAAc,IAAd,GADO;qBADA;AAIX,gDAAW;AACP,6BAAK,MAAL,GAAc,IAAd,GADO;qBAJA;iBAAf;AAQA,0CAAU;AACN,sBAAE,KAAK,EAAL,CAAF,CAAW,cAAX,CAA0B,SAA1B,EADM;AAEN,2BAAO,IAAP,CAFM;iBA1Bc;aAA5B,EADU;;;;;;;;;gCAqCL;AACL,gBAAI,SAAJ,CAAc,aAAd,EAA6B;AACzB,wBAAQ,CAAC,QAAD,CAAR;;AAEA,2BAAW,OAAX;;AAEA,sCAAQ;;;AACJ,4BAAO,KAAK,GAAL;AACH,6BAAK,QAAL;AACI,iCAAK,OAAL,GAAe,YAAM;AACjB,sCAAK,EAAL,CAAQ,KAAR,GAAiB,CAAC,MAAK,EAAL,CAAQ,KAAR,CAAc,OAAd,CAAsB,MAAtB,EAA8B,EAA9B,CAAD,CADA;6BAAN,CADnB;;AAKI,kCALJ;;AADJ,6BAQS,OAAL;AACI,iCAAK,SAAL,GAAiB,MAAjB,CADJ;AAEI,iCAAK,OAAL,GAAe,YAAM;AACjB,oCAAI,SAAS,CAAC,MAAK,EAAL,CAAQ,KAAR,CAAc,OAAd,CAAsB,SAAtB,EAAiC,EAAjC,CAAD,CADI;AAEjB,sCAAK,EAAL,CAAQ,KAAR,GAAgB,MAAM,MAAN,IAAgB,CAAhB,GAAoB,WAAW,OAAO,OAAP,CAAe,MAAK,UAAL,IAAmB,CAAnB,CAA1B,CAApB,CAFC;6BAAN,CAFnB;AAMI,kCANJ;AARJ;qBADI;;AAmBJ,yBAAK,EAAL,CAAQ,gBAAR,CAAyB,KAAK,SAAL,EAAgB,KAAK,OAAL,CAAzC,CAnBI;iBALiB;AA0BzB,0CAAU;AACN,yBAAK,EAAL,CAAQ,mBAAR,CAA4B,KAAK,SAAL,EAAgB,KAAK,OAAL,CAA5C,CADM;iBA1Be;aAA7B,EADK","file":"directives.js","sourcesContent":["/**\r\n * Create by zhukejin@hupu.com\r\n * Date 2016年6月24日14:28:28\r\n */\r\nclass Directives {\r\n    constructor (directive) {\r\n        this[directive] && this[directive]();\r\n    }\r\n \r\n    /**\r\n     * 日期指令\r\n     */\r\n    datepicker () {\r\n        Vue.directive('datepicker', {\r\n            params: ['minDate', 'maxDate', 'startDate'],\r\n\r\n            bind () {\r\n                var opt = {\r\n                    lang: 'ch',\r\n                    closeOnDateSelect: true,\r\n                    timepicker: false,\r\n                    format: 'Y-m-d',\r\n                    formatDate: 'Y-m-d',\r\n                };\r\n\r\n                for (let i in this.params) {\r\n                    if (this.params[i]) opt[i] = this.params[i];\r\n                }\r\n\r\n                $(this.el).datetimepicker(opt);\r\n            },\r\n            paramWatchers: {\r\n                maxDate () {\r\n                    this.unbind().bind();\r\n                },\r\n                minDate () {\r\n                    this.unbind().bind()\r\n                }\r\n            },\r\n            unbind () {\r\n                $(this.el).datetimepicker('destroy');\r\n                return this\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 输入框指令\r\n     */\r\n    input () {\r\n        Vue.directive('restriction', {\r\n            params: ['length'],\r\n\r\n            eventType: 'input',\r\n\r\n            bind () {\r\n                switch(this.arg) {\r\n                    case 'number':\r\n                        this.handler = () => {\r\n                            this.el.value =  +this.el.value.replace(/\\D*/g, '')\r\n                        };\r\n\r\n                        break;\r\n\r\n                    case 'float':\r\n                        this.eventType = 'blur';\r\n                        this.handler = () => {\r\n                            var number = +this.el.value.replace(/[^\\d.]/g, '');\r\n                            this.el.value = isNaN(number) ? 0 : parseFloat(number.toFixed(this.expression || 2))\r\n                        }\r\n                        break;\r\n                    default:\r\n                }\r\n\r\n                this.el.addEventListener(this.eventType, this.handler)\r\n            },\r\n            unbind () {\r\n                this.el.removeEventListener(this.eventType, this.handler)\r\n            }\r\n        })\r\n    }\r\n}\r\n"]}