{"version":3,"sources":["directives.es6"],"names":[],"mappings":"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","file":"directives.js","sourcesContent":["/**\r\n * Create by zhukejin@hupu.com\r\n * Date 2016年6月24日14:28:28\r\n */\r\nclass Directives {\r\n    constructor (directive) {\r\n        this[directive] && this[directive]();\r\n    }\r\n\r\n    /**\r\n     * 日期指令\r\n     */\r\n    datepicker () {\r\n        Vue.directive('datepicker', {\r\n            params: ['minDate', 'maxDate', 'startDate', 'format', 'datepicker', 'timepicker'],\r\n\r\n            bind () {\r\n                var opt = {\r\n                    lang: 'ch',\r\n                    closeOnDateSelect: true,\r\n                    timepicker: this.params.timepicker !== undefined ? this.params.timepicker : false,\r\n                    datepicker: this.params.datepicker !== undefined ? this.params.datepicker : true,\r\n                    format: 'Y-m-d',\r\n                    formatDate: 'Y-m-d',\r\n                    timeFormat: 'HH:mm:ss',//格式化时间\r\n                };\r\n\r\n                if (this.params.timepicker) {\r\n                    opt.format = opt.formatDate = 'H:i';\r\n                }\r\n\r\n                if (this.arg === 'ym') {\r\n                    opt.format = opt.formatDate = 'Y-m';\r\n                }\r\n\r\n                if (this.params.format) {\r\n                    opt.format = opt.formatDate = this.params.format;\r\n                }\r\n\r\n\r\n                for (let i in this.params) {\r\n                    if (this.params[i]) opt[i] = this.params[i];\r\n                }\r\n\r\n                $(this.el).datetimepicker(opt);\r\n            },\r\n            paramWatchers: {\r\n                maxDate () {\r\n                    this.unbind().bind();\r\n                },\r\n                minDate () {\r\n                    this.unbind().bind()\r\n                }\r\n            },\r\n            unbind () {\r\n                $(this.el).datetimepicker('destroy');\r\n                return this\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 输入框指令\r\n     */\r\n    input () {\r\n        Vue.directive('restriction', {\r\n            params: ['length'],\r\n\r\n            eventType: 'input',\r\n\r\n            bind () {\r\n                switch(this.arg) {\r\n                    case 'number':\r\n                        this.handler = () => {\r\n                            this.el.value =  +this.el.value.replace(/\\D*/g, '')\r\n                        };\r\n\r\n                        break;\r\n\r\n                    case 'float':\r\n                        this.eventType = 'blur';\r\n                        this.handler = () => {\r\n                            var number = +this.el.value.replace(/[^\\d.]/g, '');\r\n                            this.el.value = isNaN(number) ? 0 : parseFloat(number.toFixed(this.expression || 2))\r\n                        }\r\n                        break;\r\n                    default:\r\n                }\r\n\r\n                this.el.addEventListener(this.eventType, this.handler)\r\n            },\r\n            unbind () {\r\n                this.el.removeEventListener(this.eventType, this.handler)\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * v-select 指令\r\n     */\r\n\r\n    select () {\r\n        Vue.directive('select', {\r\n            twoWay: true,\r\n            deep: true,\r\n            params: ['width', 'search', 'placeholder', 'onChange', 'disabled'],\r\n\r\n            bind () {\r\n                var obj = {\r\n                    minimumResultsForSearch: this.params.search ? 0 : -1,\r\n                    width: this.params.width || 100,\r\n                    language: \"zh-CN\"\r\n                };\r\n\r\n                if (this.params.placeholder) {\r\n                    obj.placeholder = this.params.placeholder\r\n                }\r\n\r\n                var _this = this;\r\n                $(this.el).select2(obj).on('change', function () {\r\n                    _this.set($(this).val());\r\n\r\n                    if (_this.params.onChange) {\r\n                        _this.vm[_this.params.onChange]($(this).val());\r\n                    }\r\n\r\n                })\r\n            },\r\n            update (value) {\r\n                console.log(123)\r\n                $(this.el).val(value).trigger('change');\r\n\r\n                $(this.el).prop('disabled', this.params.disabled);\r\n            },\r\n            unbind () {\r\n                $(this.el).off().select2('destroy')\r\n            }\r\n        })\r\n    }\r\n}"]}